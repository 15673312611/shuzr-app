import{_ as $,a as v,c,q as I,b as e,g as h,w as q,v as F,t as w,F as m,e as x,p as J,k as z,u as E,l as n,n as A}from"./index-DDlqzt3H.js";import{c as M}from"./services-GkRl5Aq9.js";import"./request-CIZjav-Z.js";const i=p=>(J("data-v-f31ff863"),p=p(),z(),p),U={class:"ai-writing-container"},G=I('<view class="bg-decoration" data-v-f31ff863><view class="bg-circle bg-circle-1" data-v-f31ff863></view><view class="bg-circle bg-circle-2" data-v-f31ff863></view><view class="bg-circle bg-circle-3" data-v-f31ff863></view><view class="bg-dots" data-v-f31ff863></view></view>',1),H=i(()=>e("text",{class:"icon-back"},"←",-1)),K=[H],P=i(()=>e("view",{class:"header-title"},[e("text",{class:"title-text"},"AI文案创作"),e("view",{class:"title-underline"})],-1)),Q=i(()=>e("text",{class:"icon-close"},"×",-1)),W=[Q],X={class:"content"},Y={class:"input-section"},Z=i(()=>e("view",{class:"input-label"},[e("text",{class:"label-icon"},"💡"),e("text",{class:"label-text"},"输入创作主题")],-1)),j={class:"word-count"},ee={class:"section length-section"},te=i(()=>e("view",{class:"section-title"},[e("text",{class:"section-icon"},"📏"),e("text",null,"字数控制")],-1)),se={class:"option-group"},ae=["onClick"],oe={class:"section count-section"},ce=i(()=>e("view",{class:"section-title"},[e("text",{class:"section-icon"},"#️⃣"),e("text",null,"生成数量")],-1)),ne={class:"option-group"},le=["onClick"],ie=I('<view class="features-section" data-v-f31ff863><view class="feature-item" data-v-f31ff863><view class="feature-icon" data-v-f31ff863>⚡</view><view class="feature-text" data-v-f31ff863>高效创作</view></view><view class="feature-item" data-v-f31ff863><view class="feature-icon" data-v-f31ff863>🔄</view><view class="feature-text" data-v-f31ff863>多样变化</view></view><view class="feature-item" data-v-f31ff863><view class="feature-icon" data-v-f31ff863>🎯</view><view class="feature-text" data-v-f31ff863>精准表达</view></view></view>',1),re={class:"footer"},ue=["disabled"],ve={class:"button-content"},de={key:0,class:"button-icon"},fe={key:1,class:"button-loading"},_e={key:0,class:"button-glow"},he=i(()=>e("view",{class:"footer-tips"},"点击按钮生成AI文案，为您的创作赋能",-1)),we={key:0,class:"loading-overlay"},pe=i(()=>e("div",{class:"loading-spinner"},null,-1)),ge=[pe],ye={key:1,class:"result-modal"},me={class:"result-container"},xe=i(()=>e("h3",null,"生成结果",-1)),ke={class:"result-body"},be={class:"result-text"},Ce={class:"result-actions"},Ae=["onClick"],Ie={__name:"index",setup(p){const k=E(),l=v(!1),u=v(!1),d=v([]),f=v(""),S=o=>{},T=[{name:"100字",value:"short"},{name:"200字",value:"medium"},{name:"300字",value:"long"}],g=v("medium"),N=o=>{g.value=o},O=[{name:"1条",value:1},{name:"3条",value:3},{name:"5条",value:5}],y=v(3),B=o=>{y.value=o},L=()=>{k.back()},R=()=>{k.push("/")},_=(o,t="info")=>{alert(o)},b=async()=>{if(!f.value.trim()){_("请输入文案主题或灵感");return}const o={topic:f.value,length:g.value,count:y.value};l.value=!0;try{const t=await M.generate(o);console.log("文案生成成功，原始响应:",t),l.value=!1,console.log("响应数据类型:",typeof t),typeof t=="object"&&console.log("响应数据键:",Object.keys(t));let s=null;const r=a=>{if(!a)return null;if(Array.isArray(a.creations))return a.creations;if(a.data){if(Array.isArray(a.data.creations))return a.data.creations;if(a.data.data&&Array.isArray(a.data.data.creations))return a.data.data.creations}return null};if(s=r(t),s&&s.length>0)console.log("成功提取文案:",s),d.value=s,u.value=!0;else{if(console.error("无法从标准路径提取文案，尝试备用方法"),console.log("完整响应:",JSON.stringify(t)),typeof t=="string")try{const a=JSON.parse(t);if(s=r(a),s&&s.length>0){d.value=s,u.value=!0;return}}catch(a){console.error("解析响应字符串失败:",a)}if(Array.isArray(t)){d.value=t,u.value=!0;return}for(const a in t)if(Array.isArray(t[a])&&t[a].length>0&&typeof t[a][0]=="string"){console.log("从字段提取到可能的文案:",a),d.value=t[a],u.value=!0;return}_("无法提取生成的文案，请检查控制台日志")}}catch(t){console.error("文案生成失败:",t),l.value=!1,_("生成失败，请稍后重试")}},C=()=>{u.value=!1},V=()=>{u.value=!1,b()},D=o=>{navigator.clipboard.writeText(o).then(()=>{_("复制成功")}).catch(t=>{console.error("复制失败:",t),_("复制失败，请手动复制")})};return(o,t)=>(n(),c("view",U,[G,e("view",{class:"header"},[e("view",{class:"header-left"},[e("view",{class:"back-button",onClick:L},K)]),P,e("view",{class:"header-right"},[e("view",{class:"close-button",onClick:R},W)])]),e("view",X,[e("view",Y,[Z,q(e("textarea",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),placeholder:"请输入你想要生成的文案主题或灵感...",maxlength:"200",onInput:S},null,544),[[F,f.value]]),e("view",j,w(f.value.length)+"/200",1)]),e("view",ee,[te,e("view",se,[(n(),c(m,null,x(T,(s,r)=>e("view",{key:r,class:A(["option-item",{active:g.value===s.value}]),onClick:a=>N(s.value)},w(s.name),11,ae)),64))])]),e("view",oe,[ce,e("view",ne,[(n(),c(m,null,x(O,(s,r)=>e("view",{key:r,class:A(["option-item",{active:y.value===s.value}]),onClick:a=>B(s.value)},w(s.name),11,le)),64))])]),ie]),e("view",re,[e("button",{class:"generate-button",onClick:b,disabled:l.value},[e("view",ve,[l.value?h("",!0):(n(),c("text",de,"✨")),l.value?(n(),c("text",fe,"⏳")):h("",!0),e("text",null,w(l.value?"生成中...":"立即生成"),1)]),l.value?h("",!0):(n(),c("view",_e))],8,ue),he]),l.value?(n(),c("div",we,ge)):h("",!0),u.value?(n(),c("div",ye,[e("div",me,[e("div",{class:"result-header"},[xe,e("span",{class:"close-result",onClick:C},"×")]),e("div",ke,[(n(!0),c(m,null,x(d.value,(s,r)=>(n(),c("div",{key:r,class:"result-item"},[e("div",be,w(s),1),e("div",Ce,[e("button",{class:"copy-btn",onClick:a=>D(s)},"复制",8,Ae)])]))),128))]),e("div",{class:"result-footer"},[e("button",{class:"regenerate-btn",onClick:V},"重新生成"),e("button",{class:"close-btn",onClick:C},"关闭")])])])):h("",!0)]))}},Oe=$(Ie,[["__scopeId","data-v-f31ff863"]]);export{Oe as default};
