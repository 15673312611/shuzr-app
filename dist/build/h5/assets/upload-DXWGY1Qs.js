import{_ as E,a as i,D as I,o as H,c,b as e,g as f,n as V,F as L,q as C,t as y,j as x,i as b,w as M,v as P,E as D,p as O,k as A,l as v}from"./index-DDlqzt3H.js";import{u as G}from"./oss-BBVvcpXL.js";import{a as K}from"./services-GkRl5Aq9.js";import"./request-CIZjav-Z.js";const s=u=>(O("data-v-a67ece2e"),u=u(),A(),u),W={class:"page-container"},J=s(()=>e("div",{class:"background-layer"},[e("div",{class:"bubble bubble2"}),e("div",{class:"bubble bubble3"}),e("div",{class:"grid-background"})],-1)),Q={class:"main-container"},X=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)),Y=[X],Z=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),ee=[Z],te=s(()=>e("div",{class:"page-title"},"形象克隆",-1)),ae=s(()=>e("div",{class:"placeholder-div"},null,-1)),oe={class:"app-content-wrapper"},se={class:"app-content"},ie={class:"content-card"},ne=C('<div class="upload-icon-container" data-v-a67ece2e><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-a67ece2e><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" data-v-a67ece2e></path><polyline points="17 8 12 3 7 8" data-v-a67ece2e></polyline><line x1="12" y1="3" x2="12" y2="15" data-v-a67ece2e></line></svg></div><div class="upload-text" data-v-a67ece2e>点击上传视频</div><div class="upload-desc" data-v-a67ece2e>请上传符合要求的视频文件，大小不超过100MB</div>',3),de={key:1,class:"upload-preview"},le=["src"],ce={class:"video-info"},ve={class:"video-name"},re={class:"video-size"},ue={class:"video-actions"},pe=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polygon",{points:"5 3 19 12 5 21 5 3"})],-1)),he=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)),me={class:"name-input-container"},_e=s(()=>e("label",{class:"input-label"},"作品名称",-1)),we=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),ge=s(()=>e("span",null,"查看视频录制要求",-1)),ke=[we,ge],fe={class:"agreement-section"},ye={class:"checkbox-container"},xe=s(()=>e("span",{class:"checkmark"},null,-1)),be={class:"agreement-text"},Ce=["disabled"],qe={key:0,class:"requirements-modal"},Be={class:"modal-content"},Ve={class:"modal-header"},Me=s(()=>e("div",{class:"modal-title"},"视频录制要求",-1)),je=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Te=[je],Ue=C('<div class="modal-body" data-v-a67ece2e><p class="requirement-title" data-v-a67ece2e> 为了获得最佳的克隆效果，请严格按照以下要求录制视频 </p><div class="requirements-list" data-v-a67ece2e><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>请确保环境光线充足均匀，避免过暗或强光直射</div></div><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>请面对摄像头，保持头部和肩膀在画面中，并尽量减少头部移动</div></div><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>请使用清晰的声音和正常语速朗读文本，避免背景噪音</div></div><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>视频时长建议保持在30秒至2分钟之间</div></div><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>请避免佩戴会遮挡面部的物品，如太阳镜、口罩等</div></div><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>视频分辨率建议不低于720p（1280×720）</div></div><div class="requirement-item" data-v-a67ece2e><div class="requirement-dot" data-v-a67ece2e></div><div data-v-a67ece2e>请确保视频中只有您一人出现，避免有其他人入镜</div></div></div></div><div class="safe-area-bottom" data-v-a67ece2e></div>',2),Fe={key:1,class:"video-modal"},Ne={class:"modal-content"},Se={class:"modal-header"},$e=s(()=>e("div",{class:"modal-title"},"视频预览",-1)),ze=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Re=[ze],Ee={class:"modal-body"},Ie=["src"],He=s(()=>e("div",{class:"safe-area-bottom"},null,-1)),Le={key:2,class:"agreement-modal"},Pe={class:"modal-content"},De={class:"modal-header"},Oe=s(()=>e("div",{class:"modal-title"},"形象克隆使用协议",-1)),Ae=s(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)),Ge=[Ae],Ke=C('<div class="modal-body agreement-content" data-v-a67ece2e><h3 data-v-a67ece2e>形象克隆服务协议</h3><p class="agreement-date" data-v-a67ece2e>生效日期：2023年12月1日</p><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>1. 服务说明</h4><p data-v-a67ece2e>1.1 形象克隆服务（以下简称&quot;本服务&quot;）是由我们提供的一项基于人工智能技术，通过用户上传的视频素材创建数字人形象的服务。</p><p data-v-a67ece2e>1.2 用户通过本服务可以创建与自己相似的数字形象，并用于后续的视频合成等功能。</p></section><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>2. 用户授权与隐私</h4><p data-v-a67ece2e>2.1 用户同意并授权我们使用其上传的视频素材，用于创建和训练数字人形象模型。</p><p data-v-a67ece2e>2.2 我们承诺仅将用户提供的视频素材用于为用户提供形象克隆服务，不会将其用于其他商业用途。</p><p data-v-a67ece2e>2.3 我们将采取合理措施保护用户的个人信息和上传内容的安全。</p></section><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>3. 用户责任与保证</h4><p data-v-a67ece2e>3.1 用户保证其上传的视频素材不含有违法、侵权或不良内容。</p><p data-v-a67ece2e>3.2 用户保证对其上传的视频素材拥有合法权利，或已获得必要的授权。</p><p data-v-a67ece2e>3.3 用户应对使用本服务生成的数字人形象的使用行为负责，不得将其用于违法、侵权或其他不当用途。</p></section><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>4. 知识产权</h4><p data-v-a67ece2e>4.1 用户通过本服务生成的数字人形象的使用权归用户所有。</p><p data-v-a67ece2e>4.2 本服务的相关技术、算法等知识产权归我们所有。</p></section><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>5. 免责声明</h4><p data-v-a67ece2e>5.1 我们不对因用户提供的视频素材质量问题导致的数字人形象效果不佳承担责任。</p><p data-v-a67ece2e>5.2 我们不对用户使用生成的数字人形象所产生的任何后果承担责任。</p></section><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>6. 协议修改</h4><p data-v-a67ece2e>我们保留随时修改本协议的权利，修改后的协议将在平台上公布。用户继续使用本服务即表示同意接受修改后的协议。</p></section><section class="agreement-section-content" data-v-a67ece2e><h4 data-v-a67ece2e>7. 法律适用</h4><p data-v-a67ece2e>本协议的订立、执行和解释及争议的解决均应适用中国法律。</p></section></div><div class="safe-area-bottom" data-v-a67ece2e></div>',2),We={__name:"upload",setup(u){const p=i(!1),h=i(!1),m=i(!1),q=i(null),n=i(null),l=i(""),_=i(!1),j=i(null),B=i(null),w=i(!1),r=i(""),k=I(()=>n.value&&m.value&&!w.value&&r.value.trim()!=="");function T(){q.value.click()}function U(o){const t=o.target.files[0];if(t){if(!t.type.startsWith("video/")){alert("请选择视频文件");return}if(t.size>100*1024*1024){alert("视频大小不能超过100MB");return}n.value=t,l.value=URL.createObjectURL(t)}}function F(o){o.stopPropagation(),_.value=!0,setTimeout(()=>{B.value.play()},300)}function N(o){o.stopPropagation(),l.value&&URL.revokeObjectURL(l.value),n.value=null,l.value=""}function S(){window.history.back()}function $(){window.location.href="/"}async function z(){if(!k.value){n.value?r.value.trim()?m.value||alert("请阅读并同意使用协议"):alert("请输入作品名称"):alert("请上传视频");return}try{w.value=!0;const o=document.createElement("div");o.className="loading-toast",o.innerHTML=`
      <div class="loading-spinner"></div>
      <div class="loading-text">上传中...</div>
    `,document.body.appendChild(o);const a={fileUrl:await G(n.value,"digital-human/videos"),name:r.value,description:"通过移动端上传的数字人视频"},d=await K.create(a);if(document.body.removeChild(o),d&&d.id){const g=document.createElement("div");g.className="success-toast",g.textContent="上传成功",document.body.appendChild(g),setTimeout(()=>{document.body.removeChild(g)},2e3),setTimeout(()=>{window.location.href="/pages/asset/index"},1500)}else throw new Error((d==null?void 0:d.message)||"上传失败")}catch(o){console.error("上传视频失败:",o);const t=document.querySelector(".loading-toast");t&&document.body.removeChild(t);const a=document.createElement("div");a.className="error-toast",a.textContent=o.message||"上传失败，请重试",document.body.appendChild(a),setTimeout(()=>{document.body.removeChild(a)},2e3)}finally{w.value=!1}}function R(o){if(o===0)return"0 B";const t=1024,a=["B","KB","MB","GB"],d=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,d)).toFixed(2))+" "+a[d]}return H(()=>{}),(o,t)=>(v(),c("div",W,[J,e("div",Q,[e("div",{class:"header"},[e("div",{class:"nav-buttons"},[e("div",{class:"back-button",onClick:S},Y),e("div",{class:"home-button",onClick:$},ee)]),te,ae]),e("div",oe,[e("div",se,[e("div",ie,[e("div",{class:"upload-container",onClick:T},[e("div",{class:V(["upload-inner",{"has-preview":n.value}])},[n.value?(v(),c("div",de,[e("video",{ref_key:"previewVideoRef",ref:j,class:"preview-video",src:l.value},null,8,le),e("div",ce,[e("div",ve,y(n.value.name),1),e("div",re,y(R(n.value.size)),1)]),e("div",ue,[e("div",{class:"video-action-btn",onClick:x(F,["stop"])},[pe,b(" 预览 ")]),e("div",{class:"video-action-btn delete",onClick:x(N,["stop"])},[he,b(" 删除 ")])])])):(v(),c(L,{key:0},[ne],64))],2)]),e("div",me,[_e,M(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),class:"name-input",placeholder:"请输入作品名称（必填）"},null,512),[[P,r.value]])]),e("div",{class:"requirements-hint",onClick:t[1]||(t[1]=a=>p.value=!0)},ke),e("div",fe,[e("label",ye,[M(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>m.value=a)},null,512),[[D,m.value]]),xe,e("span",be,[b(" 我已阅读并同意 "),e("span",{class:"agreement-link",onClick:t[3]||(t[3]=x(a=>h.value=!0,["prevent"]))},"《形象克隆使用协议》")])])]),e("button",{class:V(["submit-button",{disabled:!k.value}]),disabled:!k.value,onClick:z},y(w.value?"上传中...":"提交"),11,Ce)])])])]),p.value?(v(),c("div",qe,[e("div",{class:"modal-mask",onClick:t[4]||(t[4]=a=>p.value=!1)}),e("div",Be,[e("div",Ve,[Me,e("div",{class:"modal-close",onClick:t[5]||(t[5]=a=>p.value=!1)},Te)]),Ue])])):f("",!0),_.value?(v(),c("div",Fe,[e("div",{class:"modal-mask",onClick:t[6]||(t[6]=a=>_.value=!1)}),e("div",Ne,[e("div",Se,[$e,e("div",{class:"modal-close",onClick:t[7]||(t[7]=a=>_.value=!1)},Re)]),e("div",Ee,[e("video",{ref_key:"modalVideo",ref:B,class:"modal-video",controls:"",src:l.value},null,8,Ie)]),He])])):f("",!0),h.value?(v(),c("div",Le,[e("div",{class:"modal-mask",onClick:t[8]||(t[8]=a=>h.value=!1)}),e("div",Pe,[e("div",De,[Oe,e("div",{class:"modal-close",onClick:t[9]||(t[9]=a=>h.value=!1)},Ge)]),Ke])])):f("",!0),e("input",{ref_key:"fileInput",ref:q,type:"file",accept:"video/*",style:{display:"none"},onChange:U},null,544)]))}},Ze=E(We,[["__scopeId","data-v-a67ece2e"]]);export{Ze as default};
