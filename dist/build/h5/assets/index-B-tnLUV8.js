import{_ as B,a as v,o as L,c as r,q as y,b as t,B as T,C as $,p as I,k as A,u as D,f as H,l as n,F,e as N,t as w,j as _}from"./index-DDlqzt3H.js";import{v as p}from"./services-GkRl5Aq9.js";import"./request-CIZjav-Z.js";const o=h=>(I("data-v-6ea4354d"),h=h(),A(),h),q={class:"page-container"},E=y('<view class="bg-elements" data-v-6ea4354d><view class="bg-gradient" data-v-6ea4354d></view><view class="bg-grid" data-v-6ea4354d></view><view class="bg-circle circle1" data-v-6ea4354d></view><view class="bg-circle circle2" data-v-6ea4354d></view></view>',1),j={class:"content-wrapper"},P=o(()=>t("view",{class:"header-title"},[t("text",{class:"title-text"},"声音克隆"),t("text",{class:"title-sub"},"管理您的所有声音")],-1)),R=o(()=>t("view",{class:"button-inner"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18"},[t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})]),t("text",null,"新建声音")],-1)),U=[R],Y={class:"voice-list"},G={class:"card-inner"},J={class:"voice-content"},K={class:"voice-content"},O={class:"voice-info"},Q={class:"voice-name"},W={class:"voice-date"},X={class:"voice-duration"},Z={class:"voice-actions"},tt=["onClick"],et={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20"},st=o(()=>t("path",{d:"M8 5v14l11-7z"},null,-1)),ot=[st],at={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20"},it=o(()=>t("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)),ct=[it],nt=["onClick"],lt=o(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20"},[t("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})],-1)),rt=[lt],dt=["onClick"],ht=o(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14"},[t("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})],-1)),vt=o(()=>t("text",null,"使用",-1)),ut=[ht,vt],wt=o(()=>t("view",{class:"card-glow"},null,-1)),_t={key:1,class:"empty-state"},pt=y('<view class="empty-animation" data-v-6ea4354d><view class="empty-icon-wrapper" data-v-6ea4354d><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="64" height="64" data-v-6ea4354d><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" data-v-6ea4354d></path></svg><view class="pulse-circle" data-v-6ea4354d></view></view></view><text class="empty-title" data-v-6ea4354d>开始创建您的声音</text><text class="empty-description" data-v-6ea4354d>创建您自己的声音克隆，体验AI语音合成</text>',3),gt=o(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20"},[t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)),mt=o(()=>t("text",null,"立即创建",-1)),xt=[gt,mt],ft={__name:"index",setup(h){const g=D(),l=v(null),a=v(null),m=v(!1),d=v([]),u=async()=>{m.value=!0;try{const e=await p.getMyVoiceList();e&&e.data?d.value=e.data:d.value=[]}catch(e){console.error("获取声音列表失败:",e),uni.showToast({title:"获取声音列表失败",icon:"none"}),d.value=[]}finally{m.value=!1}};L(()=>{u()});const k=e=>{const s=new Date(e);return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`},S=e=>{if(!e)return"00:00";const s=Math.floor(e/60),c=Math.floor(e%60);return`${String(s).padStart(2,"0")}:${String(c).padStart(2,"0")}`},x=()=>{g.push("/pages/voice/upload")},C=async e=>{if(l.value===e.id&&a.value){a.value.pause(),a.value.currentTime=0,l.value=null;return}try{a.value&&(a.value.pause(),a.value.currentTime=0),a.value=new Audio(e.sampleUrl),l.value=e.id,await a.value.play(),a.value.onended=()=>{l.value=null}}catch(s){console.error("播放声音失败:",s),uni.showToast({title:"播放声音失败",icon:"none"}),l.value=null}},b=e=>{g.push({path:"/pages/voice/use",query:{id:e.id,name:e.name}})},V=async e=>{uni.showModal({title:"提示",content:"确定要删除这个声音吗？",success:async s=>{if(s.confirm)try{uni.showLoading({title:"删除中..."}),await p.deleteVoice(e),uni.hideLoading(),uni.showToast({title:"删除成功",icon:"success"}),u()}catch(c){console.error("删除声音失败:",c),uni.hideLoading(),uni.showToast({title:"删除失败",icon:"none"})}}})},M=e=>{uni.showModal({title:"重命名声音",editable:!0,placeholderText:"请输入新名称",content:e.name,success:async s=>{if(s.confirm&&s.content.trim())try{await p.renameVoice(e.id,s.content.trim()),uni.showToast({title:"重命名成功",icon:"success"}),u()}catch(c){console.error("重命名失败:",c),uni.showToast({title:"重命名失败",icon:"none"})}}})},z=e=>{uni.showActionSheet({itemList:["重命名","删除"],success:s=>{switch(s.tapIndex){case 0:M(e);break;case 1:V(e.id);break}}})};return(e,s)=>{const c=H("block");return n(),r("view",q,[E,t("view",j,[t("view",{class:"nav-header"},[P,t("view",{class:"create-button",onClick:x},U)]),d.value.length>0?(n(),T(c,{key:0},{default:$(()=>[t("view",Y,[(n(!0),r(F,null,N(d.value,(i,yt)=>(n(),r("view",{class:"voice-card",key:i.id},[t("view",G,[t("view",J,[t("view",K,[t("view",O,[t("text",Q,w(i.name),1),t("text",W,"创建于 "+w(k(i.createTime)),1),t("text",X,w(S(i.durationSeconds)),1)]),t("view",Z,[t("view",{class:"play-button",onClick:_(f=>C(i),["stop"])},[l.value!==i.id?(n(),r("svg",et,ot)):(n(),r("svg",at,ct))],8,tt),t("view",{class:"more-button",onClick:_(f=>z(i),["stop"])},rt,8,nt),t("view",{class:"use-button",onClick:_(f=>b(i),["stop"])},ut,8,dt)])])])]),wt]))),128))])]),_:1})):(n(),r("view",_t,[pt,t("view",{class:"empty-action",onClick:x},xt)]))])])}}},bt=B(ft,[["__scopeId","data-v-6ea4354d"]]);export{bt as default};
